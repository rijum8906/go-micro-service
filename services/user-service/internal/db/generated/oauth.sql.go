// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: oauth.sql

package db

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createOAuth = `-- name: CreateOAuth :one
INSERT INTO oauths(
  account_id,
  provider,
  subject,
  token
)
VALUES ($1, $2, $3, $4)
RETURNING id, account_id, provider, subject, token, created_at, updated_at
`

type CreateOAuthParams struct {
	AccountID pgtype.UUID
	Provider  string
	Subject   string
	Token     string
}

// oauth.sql
func (q *Queries) CreateOAuth(ctx context.Context, arg CreateOAuthParams) (Oauth, error) {
	row := q.db.QueryRow(ctx, createOAuth,
		arg.AccountID,
		arg.Provider,
		arg.Subject,
		arg.Token,
	)
	var i Oauth
	err := row.Scan(
		&i.ID,
		&i.AccountID,
		&i.Provider,
		&i.Subject,
		&i.Token,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const deleteOAuth = `-- name: DeleteOAuth :exec
DELETE FROM oauths WHERE id = $1
`

func (q *Queries) DeleteOAuth(ctx context.Context, id pgtype.UUID) error {
	_, err := q.db.Exec(ctx, deleteOAuth, id)
	return err
}

const getOAuth = `-- name: GetOAuth :one
SELECT id, account_id, provider, subject, token, created_at, updated_at FROM oauths WHERE id = $1
`

func (q *Queries) GetOAuth(ctx context.Context, id pgtype.UUID) (Oauth, error) {
	row := q.db.QueryRow(ctx, getOAuth, id)
	var i Oauth
	err := row.Scan(
		&i.ID,
		&i.AccountID,
		&i.Provider,
		&i.Subject,
		&i.Token,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getOAuthByAccountID = `-- name: GetOAuthByAccountID :one
SELECT id, account_id, provider, subject, token, created_at, updated_at FROM oauths WHERE account_id = $1
`

func (q *Queries) GetOAuthByAccountID(ctx context.Context, accountID pgtype.UUID) (Oauth, error) {
	row := q.db.QueryRow(ctx, getOAuthByAccountID, accountID)
	var i Oauth
	err := row.Scan(
		&i.ID,
		&i.AccountID,
		&i.Provider,
		&i.Subject,
		&i.Token,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getOAuthBySubject = `-- name: GetOAuthBySubject :one
SELECT id, account_id, provider, subject, token, created_at, updated_at FROM oauths WHERE subject = $1
`

func (q *Queries) GetOAuthBySubject(ctx context.Context, subject string) (Oauth, error) {
	row := q.db.QueryRow(ctx, getOAuthBySubject, subject)
	var i Oauth
	err := row.Scan(
		&i.ID,
		&i.AccountID,
		&i.Provider,
		&i.Subject,
		&i.Token,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getOAuthBySubjectAndProvider = `-- name: GetOAuthBySubjectAndProvider :one
SELECT id, account_id, provider, subject, token, created_at, updated_at FROM oauths WHERE subject = $1 AND provider = $2
`

type GetOAuthBySubjectAndProviderParams struct {
	Subject  string
	Provider string
}

func (q *Queries) GetOAuthBySubjectAndProvider(ctx context.Context, arg GetOAuthBySubjectAndProviderParams) (Oauth, error) {
	row := q.db.QueryRow(ctx, getOAuthBySubjectAndProvider, arg.Subject, arg.Provider)
	var i Oauth
	err := row.Scan(
		&i.ID,
		&i.AccountID,
		&i.Provider,
		&i.Subject,
		&i.Token,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getOAuthsByAccountID = `-- name: GetOAuthsByAccountID :one
SELECT id, account_id, provider, subject, token, created_at, updated_at FROM oauths WHERE account_id = $1 ORDER BY created_at DESC LIMIT $2
`

type GetOAuthsByAccountIDParams struct {
	AccountID pgtype.UUID
	Limit     int32
}

func (q *Queries) GetOAuthsByAccountID(ctx context.Context, arg GetOAuthsByAccountIDParams) (Oauth, error) {
	row := q.db.QueryRow(ctx, getOAuthsByAccountID, arg.AccountID, arg.Limit)
	var i Oauth
	err := row.Scan(
		&i.ID,
		&i.AccountID,
		&i.Provider,
		&i.Subject,
		&i.Token,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const updateOAuth = `-- name: UpdateOAuth :one
UPDATE oauths
SET account_id = $2, provider = $3, subject = $4, token = $5 
WHERE id = $1
RETURNING id, account_id, provider, subject, token, created_at, updated_at
`

type UpdateOAuthParams struct {
	ID        pgtype.UUID
	AccountID pgtype.UUID
	Provider  string
	Subject   string
	Token     string
}

func (q *Queries) UpdateOAuth(ctx context.Context, arg UpdateOAuthParams) (Oauth, error) {
	row := q.db.QueryRow(ctx, updateOAuth,
		arg.ID,
		arg.AccountID,
		arg.Provider,
		arg.Subject,
		arg.Token,
	)
	var i Oauth
	err := row.Scan(
		&i.ID,
		&i.AccountID,
		&i.Provider,
		&i.Subject,
		&i.Token,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
